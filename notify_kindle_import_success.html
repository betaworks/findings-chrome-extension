<!DOCTYPE html>
<html>
	<head>
		<title>Import success!</title>

		<link rel="stylesheet" href="notifications.css" type="text/css">

		<script>
			var bkg = chrome.extension.getBackgroundPage();
			var notice = bkg.FDGS.defaultNotification;

			//success-specific display
			notice.displayInfo = function() {
				var _this = this;
				var amazonLastImportData = bkg.FDGS.amazonLastImportData;
				var amazonLastImportTotal = bkg.FDGS.amazonLastImportTotal;

				var imported = document.getElementById("imported");
				var highlight_total = document.getElementById("highlight_total");
				var book_total = document.getElementById("book_total");

				var highlight_total_html = amazonLastImportTotal;
				if(amazonLastImportTotal == 1) {
					highlight_total_html += " highlight";
				} else {
					highlight_total_html += " highlights";
				}
				highlight_total.innerHTML = highlight_total_html;
				
				var book_total_html = amazonLastImportData.length;
				if(amazonLastImportData.length == 1) {
					book_total_html += " book";
				} else {
					book_total_html += " books";
				}
				book_total.innerHTML = book_total_html;

				var sourceHTML = "<ul id='books'>";
				for(i=0; i<amazonLastImportData.length; i++) {
					sourceHTML += "<li><img src='" + amazonLastImportData[i].coverImg + "' class='coverImage'></li>";
					if( i > 10) { //too many to display!
						break;
					}
				}
				sourceHTML += "</ul>";
				imported.innerHTML = sourceHTML;
			}

			window.onload = function() { notice.start(window, notice.displayInfo); }
		</script>
	</head>
	<body>
	<div id="message" class="small">Findings imported <span id="highlight_total"></span> in <span id="book_total"></span></div>
	<div id="imported"></div>
	</body>
</html>